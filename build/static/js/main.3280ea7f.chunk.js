(this.webpackJsonpreact_chat=this.webpackJsonpreact_chat||[]).push([[0],{271:function(e,a,t){e.exports=t(455)},276:function(e,a,t){},455:function(e,a,t){"use strict";t.r(a);var n=t(17),r=t(18),s=t(19),l=t(20),o=t(0),c=t.n(o),i=t(46),u=t.n(i),d=(t(276),t(480)),h=t(38),m=t(478),p=t(477),f=t(467),g=t(457),v=function(e){Object(l.a)(t,e);var a=Object(s.a)(t);function t(){return Object(n.a)(this,t),a.apply(this,arguments)}return Object(r.a)(t,[{key:"render",value:function(){return c.a.createElement(m.a,{as:p.a,icon:"labeled",vertical:!0,inverted:!0,visible:!0,width:"very thin"},c.a.createElement(f.a,null),c.a.createElement(g.a,{icon:"add",size:"small",color:"blue"}))}}]),t}(c.a.Component),E=t(481),C=t(66),b=t(475),y=t(259),S=t(160),O=t.n(S);t(376),t(378),t(456);O.a.initializeApp({apiKey:"AIzaSyCmy7HZ589lb__W-W1xFSoe_PhUGzCuMy4",authDomain:"react-chat-4277e.firebaseapp.com",databaseURL:"https://react-chat-4277e.firebaseio.com",projectId:"react-chat-4277e",storageBucket:"react-chat-4277e.appspot.com",messagingSenderId:"129156498174",appId:"1:129156498174:web:6f7ee21bb079286ef49baf",measurementId:"G-LQ59J6M676"});var j=O.a,k=function(e){Object(l.a)(t,e);var a=Object(s.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).state={user:e.props.currentUser},e.dropdownOptions=function(){return[{key:"user",text:c.a.createElement("span",null,"Signed in as ",c.a.createElement("strong",null,e.state.user.displayName)),disabled:!0},{key:"avatar",text:c.a.createElement("span",null,"Change Avatar")},{key:"signout",text:c.a.createElement("span",{onClick:e.handleSignOut},"Sign Out")}]},e.handleSignOut=function(){j.auth().signOut().then((function(){console.log("Signed out :)")}))},e}return Object(r.a)(t,[{key:"render",value:function(){var e=this.state.user;return c.a.createElement(d.a,{style:{background:"#4c3c4c"}},c.a.createElement(d.a.Column,null,c.a.createElement(d.a.Row,{style:{padding:"1.2em",margin:0}},c.a.createElement(E.a,{inverted:!0,floated:"left",as:"h2"},c.a.createElement(C.a,{name:"code"}),c.a.createElement(E.a.Content,null,"GaxChat")),c.a.createElement(E.a,{inverted:!0,as:"h4",style:{padding:"0.25em"}},c.a.createElement(b.a,{trigger:c.a.createElement("span",null,c.a.createElement(y.a,{src:e.photoURL,spaced:"right",avatar:!0}),e.displayName),options:this.dropdownOptions()})))))}}]),t}(c.a.Component),U=t(123),w=t(42),R=t(89),N=t(472),A=t(471),P=t(468),M=function(e){return{type:"SET_CURRENT_CHANNEL",payload:{currentChannel:e}}},L=function(e){return{type:"SET_PRIVATE_CHANNEL",payload:{isPrivateChannel:e}}},I=function(e){Object(l.a)(t,e);var a=Object(s.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).state={user:e.props.currentUser,channels:[],modal:!1,channelName:"",channel:null,channelDetails:"",channelsRef:j.database().ref("channels"),messagesRef:j.database().ref("messages"),notifications:[],firstLoad:!0,activeChannel:""},e.addListeners=function(){var a=[];e.state.channelsRef.on("child_added",(function(t){a.push(t.val()),e.setState({channels:a},(function(){e.setFirstChannel()})),e.addNotificationListener(t.key)}))},e.addNotificationListener=function(a){e.state.messagesRef.child(a).on("value",(function(t){e.state.channel&&e.handleNotifications(a,e.state.channel.id,e.state.notifications,t)}))},e.handleNotifications=function(a,t,n,r){var s=0,l=n.findIndex((function(e){return e.id===a}));-1!==l?(a!==t&&(s=n[l].total,r.numChildren()-s>0&&(n[l].count=r.numChildren()-s)),n[l].lastKnownTotal=r.numChildren()):n.push({id:a,total:r.numChildren(),lastKnownTotal:r.numChildren(),count:0}),e.setState({notifications:n})},e.removeListeners=function(){e.state.channelsRef.off()},e.setFirstChannel=function(){var a=e.state.channels[0];e.state.firstLoad&&e.state.channels.length>0&&(e.props.setCurrentChannel(a),e.setActiveChannel(a),e.setState({channel:a})),e.setState({firstLoad:!1})},e.handleChange=function(a){e.setState(Object(w.a)({},a.target.name,a.target.value))},e.changeChannel=function(a){e.setActiveChannel(a),e.clearNotification(),e.props.setCurrentChannel(a),e.props.setPrivateChannel(!1),e.setState({channel:a})},e.clearNotification=function(){var a=e.state.notifications.findIndex((function(a){return a.id===e.state.channel.id}));if(-1!==a){var t=Object(U.a)(e.state.notifications);t[a].total=e.state.notifications[a].lastKnownTotal,t[a].count=0,e.setState({notifications:t})}},e.setActiveChannel=function(a){e.setState({activeChannel:a.id})},e.getNotificationCount=function(a){var t=0;if(e.state.notifications.forEach((function(e){e.id===a.id&&(t=e.count)})),t>0)return t},e.displayChannels=function(a){return a.length>0&&a.map((function(a){return c.a.createElement(p.a.Item,{key:a.id,onClick:function(){return e.changeChannel(a)},name:a.name,style:{opacity:.7},active:a.id===e.state.activeChannel},e.getNotificationCount(a)&&c.a.createElement(R.a,{color:"red"},e.getNotificationCount(a)),"# ",a.name)}))},e.addChannel=function(){var a=e.state,t=a.channelsRef,n=a.channelName,r=a.channelDetails,s=a.user,l=t.push().key,o={id:l,name:n,details:r,createdBy:{name:s.displayName,avatar:s.photoURL}};t.child(l).update(o).then((function(){e.setState({channelName:"",channelDetails:""}),e.closeModal(),console.log("channel added")})).catch((function(e){console.error(e),console.log("gadbad ho gaya")}))},e.handleSubmit=function(a){a.preventDefault(),e.isFormValid(e.state)&&e.addChannel()},e.isFormValid=function(e){var a=e.channelName,t=e.channelDetails;return a&&t},e.openModal=function(){return e.setState({modal:!0})},e.closeModal=function(){return e.setState({modal:!1})},e}return Object(r.a)(t,[{key:"componentDidMount",value:function(){this.addListeners()}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"render",value:function(){var e=this.state,a=e.channels,t=e.modal;return c.a.createElement(c.a.Fragment,null,"        ",c.a.createElement(p.a.Menu,{className:"menu"},"     ",c.a.createElement(p.a.Item,null,c.a.createElement("span",null,c.a.createElement(C.a,{name:"exchange"})," CHANNELS")," ","(",a.length,") ",c.a.createElement(C.a,{name:"add",onClick:this.openModal})),this.displayChannels(a)),c.a.createElement(N.a,{basic:!0,open:t,onClose:this.closeModal},c.a.createElement(N.a.Header,null,"Add a channel "),c.a.createElement(N.a.Content,null,c.a.createElement(A.a,{onSubmit:this.handleSubmit},c.a.createElement(A.a.Field,null,c.a.createElement(P.a,{fluid:!0,label:"Name of Channel",name:"channelName",onChange:this.handleChange})),c.a.createElement(A.a.Field,null,c.a.createElement(P.a,{fluid:!0,label:"About the Channel",name:"channelDetails",onChange:this.handleChange})))),c.a.createElement(N.a.Actions,null,c.a.createElement(g.a,{color:"green",inverted:!0,onClick:this.handleSubmit},c.a.createElement(C.a,{name:"checkmark"})," Add"),c.a.createElement(g.a,{color:"red",inverted:!0,onClick:this.closeModal},c.a.createElement(C.a,{name:"remove"})," Cancel"))))}}]),t}(c.a.Component),T=Object(h.b)(null,{setCurrentChannel:M,setPrivateChannel:L})(I),_=function(e){Object(l.a)(t,e);var a=Object(s.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).state={activeChannel:"",user:e.props.currentUser,users:[],usersRef:j.database().ref("users"),connectedRef:j.database().ref(".info/connected"),presenceRef:j.database().ref("presence")},e.addListeners=function(a){var t=[];e.state.usersRef.on("child_added",(function(n){if(a!==n.key){var r=n.val();r.uid=n.key,r.status="offline",t.push(r),e.setState({users:t})}})),e.state.connectedRef.on("value",(function(t){if(!0===t.val()){var n=e.state.presenceRef.child(a);n.set(!0),n.onDisconnect().remove((function(e){null!==e&&console.log(e)}))}})),e.state.presenceRef.on("child_added",(function(t){a!==t.key&&e.addStatusToUser(t.key)})),e.state.presenceRef.on("child_removed",(function(t){a!==t.key&&e.addStatusToUser(t.key,!1)}))},e.addStatusToUser=function(a){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.state.users.reduce((function(e,n){return n.uid===a&&(n.status="".concat(t?"online":"offline")),e.concat(n)}),[]);e.setState({user:n})},e.isUserOnline=function(e){return"online"===e.status},e.changeChannel=function(a){var t={id:e.getChannelId(a.uid),name:a.name};e.props.setCurrentChannel(t),e.props.setPrivateChannel(!0),e.setActiveChannel(a.uid)},e.getChannelId=function(a){var t=e.state.user.uid;return a<t?"".concat(a,"/").concat(t," "):"".concat(t,"/").concat(a)},e.setActiveChannel=function(a){e.setState({activeChannel:a})},e}return Object(r.a)(t,[{key:"componentDidMount",value:function(){this.state.user&&this.addListeners(this.state.user.uid)}},{key:"render",value:function(){var e=this,a=this.state,t=a.users,n=a.activeChannel;return c.a.createElement(p.a.Menu,{className:"menu"},c.a.createElement(p.a.Item,null,c.a.createElement("span",null,c.a.createElement(C.a,{name:"mail"})," DIRECT MESSAGES")," ","(",t.length,")"),t.map((function(a){return c.a.createElement(p.a.Item,{key:a.uid,active:a.uid===n,onClick:function(){return e.changeChannel(a)},style:{opacity:.7,fontStyle:"italic"}},c.a.createElement(C.a,{name:"circle",color:e.isUserOnline(a)?"green":"red"}),"@",a.name)})))}}]),t}(c.a.Component),F=Object(h.b)(null,{setCurrentChannel:M,setPrivateChannel:L})(_),x=function(e){Object(l.a)(t,e);var a=Object(s.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).state={activeChannel:"",starredChannels:[]},e.setActiveChannel=function(a){e.setState({activeChannel:a.id})},e.changeChannel=function(a){e.setActiveChannel(a),e.props.setCurrentChannel(a),e.props.setPrivateChannel(!1)},e.displayChannels=function(a){return a.length>0&&a.map((function(a){return c.a.createElement(p.a.Item,{key:a.id,onClick:function(){return e.changeChannel(a)},name:a.name,style:{opacity:.7},active:a.id===e.state.activeChannel},"# ",a.name)}))},e}return Object(r.a)(t,[{key:"render",value:function(){var e=this.state.starredChannels;return c.a.createElement(p.a.Menu,{className:"menu"},"     ",c.a.createElement(p.a.Item,null,c.a.createElement("span",null,c.a.createElement(C.a,{name:"star"})," STARRED")," ","(",e.length,")"),this.displayChannels(e))}}]),t}(c.a.Component),z=Object(h.b)(null,{setCurrentChannel:M,setPrivateChannel:L})(x),D=function(e){Object(l.a)(t,e);var a=Object(s.a)(t);function t(){return Object(n.a)(this,t),a.apply(this,arguments)}return Object(r.a)(t,[{key:"render",value:function(){var e=this.props.currentUser;return c.a.createElement(p.a,{size:"large",inverted:!0,fixed:"left",vertical:!0,style:{background:"#4c3c4c",fontSize:"1.2rem"}},c.a.createElement(k,{currentUser:e}),c.a.createElement(z,null),c.a.createElement(T,{currentUser:e}),c.a.createElement(F,{currentUser:e}))}}]),t}(c.a.Component),V=t(482),B=t(474),W=function(e){Object(l.a)(t,e);var a=Object(s.a)(t);function t(){return Object(n.a)(this,t),a.apply(this,arguments)}return Object(r.a)(t,[{key:"render",value:function(){var e=this.props,a=e.channelName,t=e.numUniqueUsers,n=e.handleSearchChange,r=e.isPrivateChannel;return c.a.createElement(V.a,{clearing:!0},"       ",c.a.createElement(E.a,{fluid:"true",as:"h2",floated:"left",style:{marginBottom:0}},c.a.createElement("span",null,a,!r&&c.a.createElement(C.a,{name:"star outline",color:"black"})," "),c.a.createElement(E.a.Subheader,null,t)),c.a.createElement(E.a,{floated:"right"},c.a.createElement(P.a,{onChange:n,size:"mini",icon:"search",name:"searchTerm",placeholder:"Search Messages"})))}}]),t}(c.a.Component),q=t(254),G=t.n(q),H=t(162),K=t.n(H),J=function(e){Object(l.a)(t,e);var a=Object(s.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).state={file:null,authorized:["image/jpeg","image/png"]},e.addFile=function(a){var t=a.target.files[0];console.log(t),t&&e.setState({file:t})},e.sendFile=function(){var a=e.state.file,t=e.props,n=t.uploadFile,r=t.closeModal;null!==a&&(e.isAuthorized(a.name)&&(n(a,{contentType:K.a.lookup(a.name)}),r(),e.clearFile()))},e.isAuthorized=function(a){return e.state.authorized.includes(K.a.lookup(a))},e.clearFile=function(){return e.setState({file:null})},e}return Object(r.a)(t,[{key:"render",value:function(){var e=this.props,a=e.modal,t=e.closeModal;return c.a.createElement(N.a,{basic:!0,open:a,onClose:t},c.a.createElement(N.a.Header,null,"Select an Image File"),c.a.createElement(N.a.Content,null,c.a.createElement(P.a,{onChange:this.addFile,fluid:!0,label:"File types: jpg , png",name:"file",type:"file"})),c.a.createElement(N.a.Actions,null,c.a.createElement(g.a,{onClick:this.sendFile,color:"green",inverted:!0},c.a.createElement(C.a,{name:"checkmark"})," Send"),c.a.createElement(g.a,{color:"red",inverted:!0,onClick:t},c.a.createElement(C.a,{name:"remove"})," Cancel")))}}]),t}(c.a.Component),Q=t(469),Z=function(e){var a=e.uploadState,t=e.percentUploaded;return"uploading"===a&&c.a.createElement(Q.a,{className:"progress__bar",percent:t,progress:!0,indicating:!0,size:"medium",inverted:!0})},$=function(e){Object(l.a)(t,e);var a=Object(s.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).state={storageRef:j.storage().ref(),uploadTask:null,uploadState:"",percentUploaded:0,message:"",loading:!1,channel:e.props.currentChannel,user:e.props.currentUser,errors:[],modal:!1},e.openModal=function(){return e.setState({modal:!0})},e.closeModal=function(){return e.setState({modal:!1})},e.handleChange=function(a){e.setState(Object(w.a)({},a.target.name,a.target.value))},e.createMessage=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t={timestamp:j.database.ServerValue.TIMESTAMP,user:{id:e.state.user.uid,name:e.state.user.displayName,avatar:e.state.user.photoURL}};return null!==a?t.image=a:t.content=e.state.message,t},e.sendMessage=function(){var a=e.props.getMessagesRef,t=e.state,n=t.message,r=t.channel;n?(e.setState({loading:!0}),a().child(r.id).push().set(e.createMessage()).then((function(){e.setState({loading:!1,message:"",errors:[]})})).catch((function(a){console.error(a),e.setState({loading:!1,errors:e.state.errors.concat(a)})}))):e.setState({errors:e.state.errors.concat({message:"Add a message "})})},e.getPath=function(){return e.props.isPrivateChannel?"chat/private-".concat(e.state.channel.id):"chat/public"},e.uploadFile=function(a,t){var n=e.state.channel.id,r=e.props.getMessagesRef(),s="".concat(e.getPath()).concat(G()(),".jpg");e.setState({uploadState:"uploading",uploadTask:e.state.storageRef.child(s).put(a,t)},(function(){e.state.uploadTask.on("state_changed",(function(a){var t=Math.round(a.bytesTransferred/a.totalBytes*100);e.props.isProgressBarVisible(t),e.setState({percentUploaded:t})}),(function(a){console.log(a),e.setState({errors:e.state.errors.concat(a),uploadState:"error",uploadTask:null})}),(function(){e.state.uploadTask.snapshot.ref.getDownloadURL().then((function(a){e.sendFileMessage(a,r,n)})).catch((function(a){console.log(a),e.setState({errors:e.state.errors.concat(a),uploadState:"error",uploadTask:null})}))}))}))},e.sendFileMessage=function(a,t,n){t.child(n).push().set(e.createMessage(a)).then((function(){e.setState({uploadState:"done"})})).catch((function(a){console.log(a),e.setState({errors:e.state.errors.concat(a)})}))},e}return Object(r.a)(t,[{key:"render",value:function(){var e=this.state,a=e.errors,t=e.message,n=e.loading,r=e.modal,s=e.uploadState,l=e.percentUploaded;return c.a.createElement(V.a,{className:"message__form"},c.a.createElement(P.a,{fluid:!0,name:"message",onChange:this.handleChange,value:t,style:{marginBottom:"0.7em"},label:c.a.createElement(g.a,{icon:"add"}),labelPosition:"left",className:a.some((function(e){return e.message.includes("message")}))?"error":"",placeholder:"Write your message"}),c.a.createElement(g.a.Group,{icon:!0,widths:"2"},c.a.createElement(g.a,{onClick:this.sendMessage,color:"orange",disabled:n,icon:"edit",content:"Add Reply",labelPosition:"left"}),c.a.createElement(g.a,{color:"teal",disabled:"uploading"===s,onClick:this.openModal,icon:"cloud upload",content:"Upload Media",labelPosition:"right"})),c.a.createElement(J,{modal:r,closeModal:this.closeModal,uploadFile:this.uploadFile}),c.a.createElement(Z,{uploadState:s,percentUploaded:l}))}}]),t}(c.a.Component),X=t(255),Y=t.n(X),ee=function(e,a){return e.user.id===a.uid?"message__self":""},ae=function(e){var a,t=e.message,n=e.user;return c.a.createElement("div",null,c.a.createElement(B.a,null,c.a.createElement(B.a.Avatar,{src:t.user.avatar}),c.a.createElement(B.a.Content,{className:ee(t,n)},c.a.createElement(B.a.Author,{as:"a"},t.user.name),c.a.createElement(B.a.Metadata,null,(a=t.timestamp,Y()(a).fromNow())),function(e){return e.hasOwnProperty("image")&&!e.hasOwnProperty("content")}(t)?c.a.createElement(y.a,{src:t.image,className:"message__image"}):c.a.createElement(B.a.Text,null,t.content))))},te=function(e){Object(l.a)(t,e);var a=Object(s.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).state={privateChannel:e.props.isPrivateChannel,privateMessagesRef:j.database().ref("privateMessages"),messagesRef:j.database().ref("messages"),channel:e.props.currentChannel,user:e.props.currentUser,messages:[],messagesLoading:!0,ProgressBar:!1,numUniqueUsers:"",searchTerm:"",searchLoading:!1,searchResults:[]},e.addListeners=function(a){e.addMessageListener(a)},e.addMessageListener=function(a){var t=[];e.getMessagesRef().child(a).on("child_added",(function(a){t.push(a.val()),e.setState({messages:t,messagesLoading:!1}),e.countUniqueUsers(t)}))},e.getMessagesRef=function(){var a=e.state,t=a.messagesRef,n=a.privateMessagesRef;return a.privateChannel?n:t},e.handleSearchChange=function(a){e.setState({searchTerm:a.target.value,searchLoading:!0},(function(){return e.handleSearchMessages()}))},e.handleSearchMessages=function(){var a=Object(U.a)(e.state.messages),t=new RegExp(e.state.searchTerm,"gi"),n=a.reduce((function(e,a){return a.content&&a.content.match(t)&&e.push(a),e}),[]);e.setState({searchResults:n})},e.countUniqueUsers=function(a){var t=a.reduce((function(e,a){return e.includes(a.user.name)||e.push(a.user.name),e}),[]),n=t.length>1||0===t.length,r="".concat(t.length," user").concat(n?"s":"");e.setState({numUniqueUsers:r})},e.displayMessages=function(a){return a.length>0&&a.map((function(a){return c.a.createElement(ae,{key:a.timestamp,message:a,user:e.state.user})}))},e.isProgressBarVisible=function(a){a>0&&e.setState({ProgressBar:!0})},e.displayChannelName=function(a){return a?"".concat(e.state.privateChannel?"@":"#").concat(a.name):""},e}return Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this.state,a=e.channel,t=e.user;a&&t&&this.addListeners(a.id)}},{key:"render",value:function(){var e=this.state,a=e.messagesRef,t=e.channel,n=e.user,r=e.messages,s=e.ProgressBar,l=e.numUniqueUsers,o=e.searchResults,i=e.searchTerm,u=e.privateChannel;return c.a.createElement(c.a.Fragment,null,c.a.createElement(W,{channelName:this.displayChannelName(t),numUniqueUsers:l,handleSearchChange:this.handleSearchChange,isPrivateChannel:u}),c.a.createElement(V.a,null,c.a.createElement(B.a.Group,{className:s?"messages__progress":"messages"},i?this.displayMessages(o):this.displayMessages(r))),c.a.createElement($,{messagesRef:a,currentChannel:t,currentUser:n,isProgressBarVisible:this.isProgressBarVisible,isPrivateChannel:u,getMessagesRef:this.getMessagesRef}))}}]),t}(c.a.Component),ne=function(e){Object(l.a)(t,e);var a=Object(s.a)(t);function t(){return Object(n.a)(this,t),a.apply(this,arguments)}return Object(r.a)(t,[{key:"render",value:function(){return c.a.createElement("div",null,"MetaPanel")}}]),t}(c.a.Component),re=Object(h.b)((function(e){return{currentUser:e.user.currentUser,currentChannel:e.channel.currentChannel,isPrivateChannel:e.channel.isPrivateChannel}}))((function(e){var a=e.currentUser,t=e.currentChannel,n=e.isPrivateChannel;return c.a.createElement(d.a,{columns:"equal",className:"app",style:{background:"#eee"}},c.a.createElement(v,null),c.a.createElement(D,{key:a&&a.id,currentUser:a}),c.a.createElement(d.a.Column,{style:{marginLeft:320}},c.a.createElement(te,{key:t&&t.id,currentChannel:t,currentUser:a,isPrivateChannel:n})),c.a.createElement(d.a.Column,{width:4},c.a.createElement(ne,null)))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var se=t(476),le=t(74),oe=function(e){Object(l.a)(t,e);var a=Object(s.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).state={email:"",password:"",errors:[],loading:!1},e.displayErrors=function(e){return e.map((function(e,a){return c.a.createElement("p",{key:a},e.message)}))},e.handleChange=function(a){e.setState(Object(w.a)({},a.target.name,a.target.value))},e.handleSubmit=function(a){a.preventDefault(),e.isFormValid(e.state)&&(e.setState({errors:[],loading:!0}),j.auth().signInWithEmailAndPassword(e.state.email,e.state.password).then((function(e){})).catch((function(a){console.error(a),e.setState({errors:e.state.errors.concat(a),loading:!1})})))},e.isFormValid=function(e){var a=e.email,t=e.password;return a&&t},e.handleInputError=function(e,a){return e.some((function(e){return e.message.toLowerCase().includes(a)}))?"error":""},e}return Object(r.a)(t,[{key:"render",value:function(){var e=this.state,a=e.email,t=e.password,n=e.errors,r=e.loading;return c.a.createElement(d.a,{textAlign:"center",verticalAlign:"middle",className:"app"},c.a.createElement(d.a.Column,{style:{maxWidth:450}},c.a.createElement(E.a,{as:"h1",icon:!0,color:"violet",textAlign:"center"},c.a.createElement(C.a,{name:"code branch",color:"violet"}),"Login to GaxChat"),c.a.createElement(A.a,{onSubmit:this.handleSubmit,size:"large"},c.a.createElement(V.a,{stacked:!0},c.a.createElement(A.a.Input,{fluid:!0,name:"email",icon:"mail",iconPosition:"left",placeholder:"Email Address",onChange:this.handleChange,value:a,className:this.handleInputError(n,"email"),type:"email"}),c.a.createElement(A.a.Input,{fluid:!0,name:"password",icon:"lock",iconPosition:"left",placeholder:"Password",value:t,onChange:this.handleChange,className:this.handleInputError(n,"password"),type:"password"}),c.a.createElement(g.a,{color:"violet",disabled:r,className:r?"loading":"",fluid:!0,size:"large"},"Submit"))),n.length>0&&c.a.createElement(se.a,{error:!0},c.a.createElement("h3",null,"Error"),this.displayErrors(n)),c.a.createElement(se.a,null,"Don't have an Account ? ",c.a.createElement(le.b,{to:"/register"},"Register"))))}}]),t}(c.a.Component),ce=t(257),ie=t.n(ce),ue=function(e){Object(l.a)(t,e);var a=Object(s.a)(t);function t(){var e;Object(n.a)(this,t);for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).state={username:"",email:"",password:"",passwordConfirmation:"",errors:[],loading:!1,userRef:j.database().ref("users")},e.isFormValid=function(){var a,t=[];return e.isFormEmpty(e.state)?(a={message:"Fill all the fields"},e.setState({errors:t.concat(a)}),!1):!!e.isPasswordValid(e.state)||(a={message:"Invalid Password"},e.setState({errors:t.concat(a)}),!1)},e.isFormEmpty=function(e){var a=e.username,t=e.email,n=e.password,r=e.passwordConfirmation;return!a.length||!t.length||!n.length||!r.length},e.isPasswordValid=function(e){var a=e.password,t=e.passwordConfirmation;return!(a.length<6||t.length<6)&&a===t},e.displayErrors=function(e){return e.map((function(e,a){return c.a.createElement("p",{key:a},e.message)}))},e.handleChange=function(a){e.setState(Object(w.a)({},a.target.name,a.target.value))},e.handleSubmit=function(a){a.preventDefault(),e.isFormValid()&&(e.setState({errors:[],loading:!0}),j.auth().createUserWithEmailAndPassword(e.state.email,e.state.password).then((function(a){console.log(a),a.user.updateProfile({displayName:e.state.username,photoURL:"http://gravatar.com/avatar/".concat(ie()(a.user.email),"?d=identicon")}).then((function(){e.saveUser(a).then((function(){console.log("User Saved")}))})).catch((function(a){console.error(a),e.setState({errors:e.state.errors.concat(a),loading:!1})}))})).catch((function(a){console.error(a),e.setState({errors:e.state.errors.concat(a),loading:!1})})))},e.saveUser=function(a){return e.state.userRef.child(a.user.uid).set({name:a.user.displayName,avatar:a.user.photoURL})},e.handleInputError=function(e,a){return e.some((function(e){return e.message.toLowerCase().includes(a)}))?"error":""},e}return Object(r.a)(t,[{key:"render",value:function(){var e=this.state,a=e.username,t=e.email,n=e.password,r=e.passwordConfirmation,s=e.errors,l=e.loading;return c.a.createElement(d.a,{textAlign:"center",verticalAlign:"middle",className:"app"},c.a.createElement(d.a.Column,{style:{maxWidth:450}},c.a.createElement(E.a,{as:"h1",icon:!0,color:"orange",textAlign:"center"},c.a.createElement(C.a,{name:"puzzle piece",color:"orange"}),"Register to GaxChat"),c.a.createElement(A.a,{onSubmit:this.handleSubmit,size:"large"},c.a.createElement(V.a,{stacked:!0},c.a.createElement(A.a.Input,{fluid:!0,name:"username",icon:"user",iconPosition:"left",placeholder:"Username",onChange:this.handleChange,value:a,type:"text"}),c.a.createElement(A.a.Input,{fluid:!0,name:"email",icon:"mail",iconPosition:"left",placeholder:"Email Address",onChange:this.handleChange,value:t,className:this.handleInputError(s,"email"),type:"email"}),c.a.createElement(A.a.Input,{fluid:!0,name:"password",icon:"lock",iconPosition:"left",placeholder:"Password",value:n,onChange:this.handleChange,className:this.handleInputError(s,"password"),type:"password"}),c.a.createElement(A.a.Input,{fluid:!0,name:"passwordConfirmation",icon:"repeat",iconPosition:"left",placeholder:"Password Confirmation",value:r,onChange:this.handleChange,className:this.handleInputError(s,"password"),type:"password"}),c.a.createElement(g.a,{color:"orange",disabled:l,className:l?"loading":"",fluid:!0,size:"large"},"Submit"))),s.length>0&&c.a.createElement(se.a,{error:!0},c.a.createElement("h3",null,"Error"),this.displayErrors(s)),c.a.createElement(se.a,null,"Already a user ? ",c.a.createElement(le.b,{to:"/login"},"Login"))))}}]),t}(c.a.Component),de=t(57),he=(t(454),t(65)),me=t(258),pe=t(124),fe={currentUser:null,isLoading:!0},ge={currentChannel:null,isPrivateChannel:!1},ve=Object(he.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_USER":return{currentUser:a.payload.currentUser,isLoading:!1};case"CLEAR_USER":return Object(pe.a)({},e,{isLoading:!1});default:return e}},channel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_CURRENT_CHANNEL":return Object(pe.a)({},e,{currentChannel:a.payload.currentChannel});case"SET_PRIVATE_CHANNEL":return Object(pe.a)({},e,{isPrivateChannel:a.payload.isPrivateChannel});default:return e}}}),Ee=t(479),Ce=t(470),be=function(){return c.a.createElement(Ee.a,{active:!0},c.a.createElement(Ce.a,{size:"huge",content:"Preparing Chat...."}))},ye=Object(he.createStore)(ve,Object(me.composeWithDevTools)()),Se=function(e){Object(l.a)(t,e);var a=Object(s.a)(t);function t(){return Object(n.a)(this,t),a.apply(this,arguments)}return Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;j.auth().onAuthStateChanged((function(a){a?(e.props.setUser(a),e.props.history.push("/")):(e.props.history.push("/login"),e.props.clearUser())}))}},{key:"render",value:function(){return this.props.isLoading?c.a.createElement(be,null):c.a.createElement(de.c,null,c.a.createElement(de.a,{exact:!0,path:"/",component:re}),c.a.createElement(de.a,{path:"/login",component:oe}),c.a.createElement(de.a,{path:"/register",component:ue}))}}]),t}(c.a.Component),Oe=Object(de.f)(Object(h.b)((function(e){return{isLoading:e.user.isLoading}}),{setUser:function(e){return{type:"SET_USER",payload:{currentUser:e}}},clearUser:function(){return{type:"CLEAR_USER"}}})(Se));u.a.render(c.a.createElement(h.a,{store:ye},c.a.createElement(le.a,null,c.a.createElement(Oe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[271,1,2]]]);
//# sourceMappingURL=main.3280ea7f.chunk.js.map